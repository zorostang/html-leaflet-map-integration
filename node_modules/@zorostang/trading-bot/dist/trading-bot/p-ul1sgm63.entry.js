import{r as t,h as e}from"./p-982dd918.js";var n=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r="object"==typeof i&&i&&i.Object===Object&&i,s="object"==typeof self&&self&&self.Object===Object&&self,o=r||s||Function("return this")(),a=o,u=function(){return a.Date.now()},c=o.Symbol,l=Object.prototype,d=l.hasOwnProperty,f=l.toString,h=c?c.toStringTag:void 0,p=Object.prototype.toString,m=c?c.toStringTag:void 0,g=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":m&&m in Object(t)?function(t){var e=d.call(t,h),n=t[h];try{t[h]=void 0;var i=!0}catch(t){}var r=f.call(t);return i&&(e?t[h]=n:delete t[h]),r}(t):function(t){return p.call(t)}(t)},v=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,b=/^0o[0-7]+$/i,w=parseInt,j=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==g(t)}(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(v,"");var i=T.test(t);return i||b.test(t)?w(t.slice(2),i?2:8):y.test(t)?NaN:+t},O=Math.max,S=Math.min,E=function(t,e,i){var r=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return n(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),function(t,e,i){var r,s,o,a,c,l,d=0,f=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,i=s;return r=s=void 0,d=e,a=t.apply(i,n)}function g(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-d>=o}function v(){var t=u();if(g(t))return y(t);c=setTimeout(v,function(t){var n=e-(t-l);return h?S(n,o-(t-d)):n}(t))}function y(t){return c=void 0,p&&r?m(t):(r=s=void 0,a)}function T(){var t=u(),n=g(t);if(r=arguments,s=this,l=t,n){if(void 0===c)return function(t){return d=t,c=setTimeout(v,e),f?m(t):a}(l);if(h)return clearTimeout(c),c=setTimeout(v,e),m(l)}return void 0===c&&(c=setTimeout(v,e)),a}return e=j(e)||0,n(i)&&(f=!!i.leading,o=(h="maxWait"in i)?O(j(i.maxWait)||0,e):o,p="trailing"in i?!!i.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),d=0,r=l=s=c=void 0},T.flush=function(){return void 0===c?a:y(u())},T}(t,e,{leading:r,maxWait:e,trailing:s})};class x{constructor(e){t(this,e),this.instrument="",this.updateLastTrade=(t,e)=>{const n=JSON.parse(t);n.data&&n.data[0].symbol===this.instrument&&e(n.data[0])},this.throttledUpdate=E(this.updateLastTrade,33),this.connect=()=>{this.ws=new WebSocket("wss://www.bitmex.com/realtime"),this.ws.onopen=()=>{this.instrument=this.instrument?this.instrument:"XBTUSD",this.ws.send(JSON.stringify({op:"subscribe",args:`trade:${this.instrument}`}))},this.ws.onmessage=t=>{this.state=t.data},this.ws.onerror=()=>{},this.ws.onclose=()=>{}},this.getFontSize=()=>"1rem",this.getColor=()=>{if(this.lastTrade)switch(this.lastTrade.tickDirection){case"ZeroPlusTick":return"green";case"ZeroMinusTick":return"red";case"PlusTick":return"green";case"MinusTick":return"red"}},this.style=()=>({fontSize:this.getFontSize(),color:this.getColor()})}watchHandler(t){this.throttledUpdate(t,t=>{this.lastTrade=Object.assign({},t)})}handleInstrumentChange(t){this.ws.send(JSON.stringify({op:"subscribe",args:`trade:${this.instrument}`}))}componentWillLoad(){this.connect()}render(){return this.lastTrade?e("div",null,this.instrument," is trading at: ",e("span",{style:this.style()},this.lastTrade.price)):null}static get watchers(){return{state:["watchHandler"],instrument:["handleInstrumentChange"]}}static get style(){return""}}class L{constructor(e){t(this,e)}getText(){return(this.first||"")+((t=this.middle)?` ${t}`:"")+((e=this.last)?` ${e}`:"");var t,e}render(){return e("div",null,"This is a demonstration of a stencil.js component ",this.getText())}static get style(){return""}}export{x as live_trades,L as my_component};